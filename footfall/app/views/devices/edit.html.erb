<div class="wrapper wrapper-content animated fadeInRight">
  <div class="ibox ">
    <div class="ibox-title">
      <% if @device.id %>
        <h3> <%= @device.device_id %> </h3>
      <% end %>
      Please note that <span class="required-legend">indicates a required field</span>
    </div>
    <div class="ibox-content">
      <div class="row">
        <div class="col">
          <%= render partial: "layouts/errors", object: @device, as: 'form' %>

          <%= bootstrap_form_for(@device, inline_errors: false, html: { class: 'mt-3' }) do |f| %>

            <fieldset class="mb-4">
              <legend class="mb-3 border-bottom">Basic details</legend>
              <div class="row">
                <div class="col-sm-6">
                  <%= f.text_field :device_id, :label => 'Device ID' %>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-6">
                  <%= f.collection_select :device_group_id, @device_groups, :id, :name,
                        { label: 'Device group', include_blank: 'Select a device group if appropriate...' } %>
                </div>
              </div>
            </fieldset>

            <fieldset class="mb-4">
              <legend class="mb-3 border-bottom">Device location</legend>
              <div class="row">
                <div class="col-sm">
                  <%= f.text_field :latitude,  :label => 'Latitude' %>
                </div>
                <div class="col-sm">
                  <%= f.text_field :longitude, :label => 'Longitude' %>
                </div>
              </div>
            </fieldset>

            <fieldset class="mb-4">
              <legend class="mb-3 border-bottom">Current status</legend>
              <div class="row">
                <div class="col-sm-6">
                  <%= f.number_field :footfall,
                      label: 'Footfall',
                      help: 'Most recent known footfall ... not normally entered manually',
                      min: 1, max: 999, step: 1 %>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-6">
                  <%= f.number_field :battery,
                      label: 'Battery',
                      help: 'Most recent known battery percentage ... not normally entered manually',
                      append: '%',
                      min: 0, max: 100, step: 1 %>
                </div>
              </div>
            </fieldset>

            <fieldset class="mb-4">
              <legend class="mb-3 border-bottom">Alarm thresholds</legend>
              <div class="row">
                <div class="col-sm">
                  <%= f.number_field :footfall_threshold_amber,
                        label: 'Footfall amber warning threshold',
                        min: 1, max: 999, step: 1 %>
                </div>
                <div class="col-sm">
                  <%= f.number_field :footfall_threshold_red,
                        label: 'Footfall red warning threshold',
                        min: 1, max: 999, step: 1 %>
                </div>
              </div>

              <div class="row">
                <div class="col-sm">
                  <%= f.number_field :battery_threshold_amber,
                        label: 'Battery amber warning threshold',
                        append: '%',
                        min: 1, max: 99, step: 1 %>
                </div>
                <div class="col-sm">
                  <%= f.number_field :battery_threshold_red,
                        label: 'Battery red warning threshold',
                        append: '%',
                        min: 1, max: 99, step: 1 %>
                </div>
              </div>
            </fieldset>

            <div class="row">
              <div class="col">
                <%= f.text_area :notes, label: 'Notes', rows: 5 %>
              </div>
            </div>

            <div class="mt-2 float-right">
              <%= button_tag(type: "submit", class: "btn btn-w-m btn-primary") do %>
                <i class="fa fa-check"></i> Save
              <% end %>
              <%= link_to @cancel_path, :class => 'btn btn-w-m btn-default' do %>
                <i class="fa fa-times"></i> Cancel
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>